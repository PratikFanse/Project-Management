"use strict";(self.webpackChunkProject_Management=self.webpackChunkProject_Management||[]).push([[817],{1817:function(e,t,n){n.r(t),n.d(t,{default:function(){return W}});var r=n(4942),s=n(1413),a=n(885),i=n(3915),o=n(8870),l=n(890),d=n(1889),c=n(5523),p=n(4454),Z=n(9188),j=n(4925),m=n(9321),x=n(7865),u=n(1918),h=n(242),f=n(4512),g=n(4130),P=n(9442),v=n(3767),b=n(6151),k=n(2791),w=n(8550),S=n(9761),C=n(9783),T=n(2570),O=n.n(T),R=n(4569),D=n.n(R),I=n(2426),L=n.n(I),E=n(2797),A=n(4210),N=n(6105),_=n(7405),M=n(184),y=["todo","inprogress","review","completed"];function W(e){var t=k.useState(e.userInfo),n=(0,a.Z)(t,1)[0],T=k.useState([]),R=(0,a.Z)(T,2),W=R[0],z=R[1],B=k.useState([]),G=(0,a.Z)(B,2),V=G[0],F=G[1],U=k.useState(!!e.isEditTask),H=(0,a.Z)(U,1)[0],J=k.useState(!0),K=(0,a.Z)(J,2),Q=K[0],X=K[1],Y=k.useState(e.project?e.project:null),$=(0,a.Z)(Y,1)[0],ee=k.useState({title:"",isPersonal:!$&&!H,project:$?$.id:"",owner:"",startDate:null,endDate:null}),te=(0,a.Z)(ee,2),ne=te[0],re=te[1],se=k.useState({title:!1,dateRange:!1,project:!!$,owner:!1,isAttempted:!1}),ae=(0,a.Z)(se,2),ie=ae[0],oe=ae[1];k.useEffect((function(){H&&e.editTaskPageInfo&&D().get("/task/getTaskById/"+e.editTaskPageInfo).then((function(e){e.data.projectList&&(z(e.data.projectList),F(e.data.memberList)),re(e.data),X(!e.data.startDate),oe({title:!0,dateRange:!0,project:!!e.data.project,owner:!!e.data.project,isAttempted:!1})}))}),[H,e.editTaskPageInfo]),k.useEffect((function(){ne.isPersonal||ne.projectList?ne.projectList?re((0,s.Z)((0,s.Z)({},ne),{},{projectList:""})):(re((0,s.Z)((0,s.Z)({},ne),{},{project:"none",owner:"none"})),F([])):D().get("/project/getProjectList").then((function(e){z(e.data)}))}),[ne.isPersonal]),k.useEffect((function(){ne.project&&"none"!==ne.project&&!ne.memberList?D().get("/project/getProjectMembers/"+ne.project).then((function(e){re((0,s.Z)((0,s.Z)({},ne),{},{owner:"none"})),F(e.data)})):ne.memberList?re((0,s.Z)((0,s.Z)({},ne),{},{memberList:""})):(re((0,s.Z)((0,s.Z)({},ne),{},{owner:"none"})),F([]))}),[ne.project]);var le=function(e){"isPersonal"!==e.target.name?re((0,s.Z)((0,s.Z)({},ne),{},(0,r.Z)({},e.target.name,e.target.value))):re((0,s.Z)((0,s.Z)({},ne),{},(0,r.Z)({},e.target.name,e.target.checked))),de(e)},de=function(e,t){t?(0,I.isMoment)(t[0])&&(0,I.isMoment)(t[1])&&t[0].isSameOrBefore(t[1],"date")&&Q&&t[0].isSameOrAfter(new Date,"date")?oe((0,s.Z)((0,s.Z)({},ie),{},{dateRange:!0})):oe((0,s.Z)((0,s.Z)({},ie),{},{dateRange:!1})):"title"===e.target.name?oe((0,s.Z)((0,s.Z)({},ie),{},{title:O().isLength(e.target.value,{min:3})})):"project"!==e.target.name&&"owner"!==e.target.name||oe((0,s.Z)((0,s.Z)({},ie),{},(0,r.Z)({},e.target.name,!ne.isPersonal&&"none"!==e.target.value||ne.isPersonal)))},ce=function(t){D().put("/task/changeTransission",{transission:t,taskId:ne._id}).then((function(){e.reRenderTask(""),e.reRenderTask("allTask"),e.handleClose()}))};return(0,M.jsxs)(o.Z,{component:"form",autoComplete:"off",onSubmit:H?function(t){if(t.preventDefault(),ie.title&&ie.dateRange&&(ne.isPersonal||!ne.isPersonal&&"none"!==ne.project&&"none"!==ne.owner)){var n=(0,s.Z)({},ne);"none"!==n.project&&n.project||(delete n.project,delete n.owner),D().post("/task/updateTask",n).then((function(t){e.reRenderTask(""),e.reRenderTask("allTask"),e.handleClose()}))}else oe((0,s.Z)((0,s.Z)({},ie),{},{isAttempted:!0}))}:function(t){if(t.preventDefault(),ie.title&&ie.dateRange&&(ne.isPersonal||!ne.isPersonal&&"none"!==ne.project&&"none"!==ne.owner)){var n=(0,s.Z)({},ne);"none"!==n.project&&n.project||(delete n.project,delete n.owner),D().post("/task/addNewTask",n).then((function(t){e.reRenderTask(""),e.reRenderTask("allTask"),e.handleClose()}))}else oe((0,s.Z)((0,s.Z)({},ie),{},{isAttempted:!0}))},sx:q,children:[(0,M.jsxs)(l.Z,{sx:{mb:1},id:"modal-modal-title",variant:"h6",component:"h2",children:[H?"Edit":"Add"," Task"]}),(0,M.jsxs)(d.ZP,{container:!0,spacing:2,children:[(0,M.jsx)(d.ZP,{item:!0,xs:12,children:(0,M.jsx)(w.Z,{sx:{width:"100%",mb:2},id:"filled-textarea",value:ne.title,name:"title",label:"Task Name",placeholder:"Placeholder",variant:"standard",size:"small",required:!0,error:!ie.title&&ie.isAttempted,helperText:"Must have min 3 character.",onChange:le})}),(0,M.jsx)(i.Z,{dateAdapter:C.Z,children:(0,M.jsx)(S.Z,{disablePast:Q,value:[ne.startDate,ne.endDate],onChange:function(e){L()(e[0]).isSame(ne.startDate,"date")||X(!0),e[1]?re((0,s.Z)((0,s.Z)({},ne),{},{startDate:e[0]._d,endDate:e[1]._d})):re((0,s.Z)((0,s.Z)({},ne),{},{startDate:e[0]._d})),de("",e)},renderInput:function(e,t){return(0,M.jsxs)(k.Fragment,{children:[(0,M.jsx)(w.Z,(0,s.Z)({sx:{ml:2},required:!0,variant:"standard"},e)),(0,M.jsx)(o.Z,{sx:{mx:2},children:" to "}),(0,M.jsx)(w.Z,(0,s.Z)({variant:"standard",required:!0},t))]})}})}),H||$?"":(0,M.jsx)(d.ZP,{item:!0,sx:{mb:1},xs:12,children:(0,M.jsx)(c.Z,{name:"isPersonal",control:(0,M.jsx)(p.Z,{checked:ne.isPersonal,onClick:le}),label:"Is this Personal task"})}),ne.isPersonal?"":(0,M.jsxs)(d.ZP,{container:!0,spacing:2,sx:H||$?{ml:0,mt:1.5}:{ml:0},children:[(0,M.jsx)(d.ZP,{item:!0,xs:12,children:(0,M.jsxs)(Z.Z,{variant:"standard",sx:{minWidth:"100%",mb:2},children:[(0,M.jsx)(j.Z,{id:"select-project-label",error:!ie.project&&!ne.isPersonal&&ie.isAttempted,children:"Project"}),(0,M.jsxs)(m.Z,{labelId:"select-project-label",name:"project",id:"demo-simple-select-standard",value:ne.project?ne.project:"none",onChange:le,disabled:!(!H&&!$),label:"Project",error:!ie.project&&!ne.isPersonal&&ie.isAttempted,children:[(0,M.jsx)(x.Z,{value:"none",children:"None"}),$?(0,M.jsx)(x.Z,{value:$.id,children:$.title},$.id):W.map((function(e){return(0,M.jsx)(x.Z,{value:e._id,children:e.title},e._id)}))]})]})}),(0,M.jsx)(d.ZP,{item:!0,xs:12,children:(0,M.jsxs)(Z.Z,{variant:"standard",sx:{minWidth:"100%",mb:2},children:[(0,M.jsx)(j.Z,{id:"select-owner-label",error:!ie.owner&&!ne.isPersonal&&ie.isAttempted,children:"Owner"}),(0,M.jsxs)(m.Z,{labelId:"select-owner-label",name:"owner",id:"memberList",value:ne.owner?ne.owner:"none",onChange:le,label:"Owner",error:!ie.owner&&!ne.isPersonal&&ie.isAttempted,children:[(0,M.jsx)(x.Z,{value:"none",children:"None"}),V.map((function(e){return(0,M.jsx)(x.Z,{className:"member-li",value:e._id,children:(0,M.jsxs)(d.ZP,{container:!0,spacing:2,children:[(0,M.jsx)(d.ZP,{item:!0,xs:6,children:e.username}),(0,M.jsx)(d.ZP,{item:!0,sx:{textAlign:"right"},xs:6,children:(0,M.jsx)(u.Z,{sx:{textTransform:"uppercase"},label:e.role,size:"small"})})]})},e._id)}))]})]})})]}),(0,M.jsx)(d.ZP,{item:!0,xs:12,children:(0,M.jsx)(w.Z,{sx:{width:"100%"},name:"description",value:ne.description?ne.description:"",id:"filled-textarea",label:"Description",placeholder:"Description",multiline:!0,variant:"filled",rows:2,onChange:le})}),H&&("employee"!==n.role||"employee"===n.role&&ne.isPersonal)?(0,M.jsx)(o.Z,{sx:{width:"100%",my:4},children:(0,M.jsxs)(h.Z,{nonLinear:!0,activeStep:y.indexOf(ne.transission),alternativeLabel:!0,children:[(0,M.jsx)(f.Z,{active:0===y.indexOf(ne.transission),children:(0,M.jsx)(g.Z,{color:"inherit",onClick:function(){return ce("todo")},children:(0,M.jsx)(P.Z,{className:0===y.indexOf(ne.transission)?"activeStep":"",StepIconComponent:function(){return(0,M.jsx)(E.Z,{})},children:"TODO"})})},"TODO"),(0,M.jsx)(f.Z,{active:1===y.indexOf(ne.transission),children:(0,M.jsx)(g.Z,{color:"inherit",onClick:function(){return ce("inprogress")},children:(0,M.jsx)(P.Z,{className:1===y.indexOf(ne.transission)?"activeStep":"",StepIconComponent:function(){return(0,M.jsx)(A.Z,{})},children:"INPROGRESS"})})},"INPROGRESS"),(0,M.jsx)(f.Z,{active:2===y.indexOf(ne.transission),children:(0,M.jsx)(g.Z,{color:"inherit",onClick:function(){return ce("review")},children:(0,M.jsx)(P.Z,{className:2===y.indexOf(ne.transission)?"activeStep":"",StepIconComponent:function(){return(0,M.jsx)(N.Z,{})},children:"REVIEW"})})},"RREVIEW"),(0,M.jsx)(f.Z,{active:3===y.indexOf(ne.transission),children:(0,M.jsx)(g.Z,{disabled:!1,color:"inherit",onClick:function(){return ce("completed")},children:(0,M.jsx)(P.Z,{className:3===y.indexOf(ne.transission)?"activeStep":"",StepIconComponent:function(){return(0,M.jsx)(_.Z,{})},children:"COMPLETED"})})},"COMPLETED")]})}):"",(0,M.jsx)(d.ZP,{item:!0,xs:12,children:(0,M.jsxs)(v.Z,{direction:"row",spacing:2,children:[(0,M.jsx)(b.Z,{type:"submit",variant:"contained",children:H?"Update":"Add"}),(0,M.jsx)(b.Z,{variant:"outlined",onClick:e.handleClose,children:"Cancel"})]})})]})]})}var q={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"white",borderRadius:"10px",boxShadow:"3px 3px 10px #434242bd",p:4}}}]);
//# sourceMappingURL=817.0248efe4.chunk.js.map